### Rust Note #7 Rust的注释和文档

1. Rust的注释和文档

   1. 代码注释（与其他语言并无区别）
      1. 行注释 // 
      2. 块注释 /* */

   2. 文档注释简介：
      1. 支持MarkDown语法高亮,对项目描述、公共API等用户关心的功能进行介绍。
      2. 同时还是提供示例代码，目标读者往往是想要了解你项目的人。
      3. 包注释和模块注释。主要用于说明当前包和模块的功能，用于用户快速了解。
      4. crate.io上的包的文档（功能特性、使用方式）：都是通过文档注释自动实现的。
      5. Rust的cargo doc命令，提供了把文档注释转换为HTML文件供用户查看的功能。
      6. 文档注释位于lib类型的包中。

2. Rust文档注释写法

   1. 文档行注释：/// 使用#开头的行会在文档中被隐藏起来,但依然会在文档测试中运行。

      主要用于想保留文档的测试功能，但又不想用户看到注释的场景。

   2. 文档块注释：/** ... */

   3. 包注释和模块注释（模块注释是对模块文件的注释module level documentation.）

      1. 行注释 //! 
      2. 块注释 /*! ... */

3. 文档测试(Doc Test)：Rust允许我们在文档注释中写单元测试用例。

4. 文档注释中的代码跳转

   1. 跳转到标准库 eg: [Option]是一个链接，指向了标准库中Option枚举类型。

      1. 在文档中可以直接点击，然后跳转。
      2. 在IDE中，CRTL + 鼠标左键可以查看源码。

   2. 可以使用路径的方式进行跳转：**使用完整路径跳转到指定项。**

   3. 使用**标示类型的方式**可以完成同名项的跳转。

      ```rust
      /// 跳转到结构体  [`Foo`](struct@Foo)
      pub struct Bar;
      
      /// 跳转到同名函数 [`Foo`](fn@Foo)
      pub struct Foo {}
      
      /// 跳转到同名宏 [`foo!`]
      pub fn Foo() {}
      
      #[macro_export]
      macro_rules! foo {
        () => {}
      }
      ```

5. 文档搜索别名

   ​	Rust文档支持搜索功能。可以为自己的类型定义几个别名，以实现更好的搜索展现。当别名命中的时候，搜索结果会被放在第一位。

6. 一个综合例子

   1. 文档注释

   2. **一个项目Package包含多个包Crate**：二进制可执行包（bin target）和lib包（库包）。

      它们的crate root包根分别是 src/main.rs 和 src/lib.rs, 而且要在二进制包中引用lib包。

   3. 使用pub use引入，然后再导出API，观察html上的文档。

7. Rust的格式化输出

   1. 与其他语言的%d, %s不同，**Rust特立独行地选择了 {} 作为格式化占位符。**

      你无需再为特点地类型选择特定的占位符，**统一交给{}来替代即可，剩下的类型推导只需要交给Rust去做。**

   2. 与{}类似的是，{:?}也是占位符。

      1. {}适用于实现了std::fmt::Display特征的类型。
      2. {:?}适用于实现了std::fmt::Debug特征的类型，用于调试场景。

   3. Debug特征和Display特征

      1. 大多数Rust类型都实现了Debug特征或者支持派生该特征。
         1. 数组、字符串、数值类型等等，直接用{:?}进行输出。
         2. 结构体需要使用#[derive(Debug)]派生Debug特征后输出。

      2. **Display特征往往需要我们自定义想要的格式化方式**
         1. 为自定义类型实现Display特征。
         2. 使用{:?} 或者 {:#?}(更加优美一些，分行格式化了)来改用Debug特征。
         3. 使用newtype为**外部类型**实现Display特征。

   4. Rust可以对输出进行宽度、精度等的控制，用时再查。








































